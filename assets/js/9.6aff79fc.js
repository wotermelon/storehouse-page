(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{349:function(t,a,s){t.exports=s.p+"assets/img/performance.7ee16995.jpg"},419:function(t,a,s){"use strict";s.r(a);var e=s(42),n=Object(e.a)({},(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"性能优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能优化"}},[t._v("#")]),t._v(" 性能优化")]),t._v(" "),e("p",[t._v("要做好性能优化，首先要知道有哪些指标和工具来衡量相关的优化方向")]),t._v(" "),e("p",[t._v("主要包括：")]),t._v(" "),e("ul",[e("li",[t._v("网络优化")]),t._v(" "),e("li",[t._v("首屏优化")]),t._v(" "),e("li",[t._v("js/css/图片资源治理")]),t._v(" "),e("li",[t._v("js执行耗时治理")]),t._v(" "),e("li",[t._v("页面样式重排重绘优化")]),t._v(" "),e("li",[t._v("cpu占用处理")]),t._v(" "),e("li",[t._v("体验增强")]),t._v(" "),e("li",[t._v("容错降级")])]),t._v(" "),e("h2",{attrs:{id:"相关工具"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#相关工具"}},[t._v("#")]),t._v(" 相关工具")]),t._v(" "),e("ul",[e("li",[t._v("devtool-Audits(lighthouse)：检测页面性能瓶颈，性能报告")]),t._v(" "),e("li",[t._v("devtool-Performance-bottom-up：js函数执行耗时")]),t._v(" "),e("li",[t._v("devtool-Memory：内存检测")]),t._v(" "),e("li",[t._v("devtool-Layers：页面绘制排版性能分析")]),t._v(" "),e("li",[t._v("devtool-JavaScript Profiler：cpu占用检测")]),t._v(" "),e("li",[t._v("devtool-Network-Performance monitor：实时监控cpu、堆内存、dom数量等指标")])]),t._v(" "),e("h2",{attrs:{id:"主要指标"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#主要指标"}},[t._v("#")]),t._v(" 主要指标")]),t._v(" "),e("blockquote",[e("p",[t._v("内容呈现相关：FP、FCP、FMP、LCP、SI、FSP、CLS\n交互响应相关：TTI、FID、FCI(不推荐)、TBT")])]),t._v(" "),e("h3",{attrs:{id:"fcp（first-content-paint）首次内容绘制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fcp（first-content-paint）首次内容绘制"}},[t._v("#")]),t._v(" FCP（First Content Paint）首次内容绘制")]),t._v(" "),e("blockquote",[e("p",[t._v("和 "),e("code",[t._v("白屏")]),t._v(" 时间相关的指标。FCP 可以作为网络加载相关优化的参考")]),t._v(" "),e("p",[t._v("chrome-devtool => performance => timing => FCP")])]),t._v(" "),e("p",[t._v("记录页面首次绘制文本、图片、非空白 Canvas 或 SVG 的时间。")]),t._v(" "),e("p",[t._v("官方推荐的时间区间 :")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("FCP 时间（秒）")]),t._v(" "),e("th",[t._v("颜色")]),t._v(" "),e("th",[t._v("得分（http）")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("0-2")]),t._v(" "),e("td",[t._v("Green(fast)")]),t._v(" "),e("td",[t._v("75-100")])]),t._v(" "),e("tr",[e("td",[t._v("2-4")]),t._v(" "),e("td",[t._v("Orange(moderate)")]),t._v(" "),e("td",[t._v("50-74")])]),t._v(" "),e("tr",[e("td",[t._v("4以上")]),t._v(" "),e("td",[t._v("Red(low)")]),t._v(" "),e("td",[t._v("0-49")])])])]),t._v(" "),e("h4",{attrs:{id:"优化："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化："}},[t._v("#")]),t._v(" 优化：")]),t._v(" "),e("h5",{attrs:{id:"a-网络优化"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#a-网络优化"}},[t._v("#")]),t._v(" a.网络优化")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("开启 "),e("code",[t._v("keep-alive")]),t._v("，使用 "),e("code",[t._v("HTTP2.0")]),t._v("，利用多路复用机制，防止队首阻塞")])]),t._v(" "),e("li",[e("p",[e("code",[t._v("dns-prefetch")]),t._v(" 预解析 DNS 的 IP 地址。")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("dns-prefetch"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//hot.onlinemovieweb.com"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("对资源使用 "),e("code",[t._v("preload")]),t._v("，"),e("code",[t._v("prefetch")])]),t._v(" "),e("p",[t._v("preload 与 prefetch 不同的地方就是它专注于"),e("strong",[t._v("当前的页面")]),t._v("，并以"),e("strong",[t._v("高优先级")]),t._v("加载资源，prefetch 专注于下一个页面将要加载的资源并以低优先级加载。同时也要注意 preload 并不会阻塞 window 的 "),e("code",[t._v("onload")]),t._v(" 事件。")]),t._v(" "),e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("link")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("rel")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("preload"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("href")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://example.com/fonts/font.woff"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("as")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation attr-equals"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("font"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),e("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("crossorigin")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),e("p",[e("code",[t._v("prefetch")]),t._v(" "),e("strong",[t._v("低优先级")]),t._v("，允许浏览器在后台（空闲时）获取"),e("strong",[t._v("将来")]),t._v("可能用得到的资源，并且将他们存储在浏览器的缓存中。")])])]),t._v(" "),e("h5",{attrs:{id:"b-浏览器同一域名-6个通道的限制-，减少-http-请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#b-浏览器同一域名-6个通道的限制-，减少-http-请求"}},[t._v("#")]),t._v(" b.浏览器同一域名 "),e("code",[t._v("6")]),t._v("个通道的限制 ，减少 HTTP 请求")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("js/css 资源合并，合并 "),e("strong",[t._v("vendor chunk")]),t._v(" 和 "),e("strong",[t._v("page chunk")])])]),t._v(" "),e("li",[e("p",[t._v("SVG字体包（iconfont），小图片 "),e("code",[t._v("base64")]),t._v("（图片太多可通过webpack 拆包合并为一个js，解决缓存问题）")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("optimization"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    splitChunks"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      cacheGroups"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        icons"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          test"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token regex"}},[t._v("/[\\\\/]vicon[\\\\/]/")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          name"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'icons'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          chunks"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v("'all'")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          priority"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n          enforce"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n        "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])]),t._v(" "),e("li",[e("p",[t._v("静态资源部署到"),e("code",[t._v("CDN")]),t._v("（Content Delivery Network，内容分发网络 ），利用CDN 加速和缓存，降低网络的拥塞状况、提高请求的响应速度，也能够减少源站的负载压力，还可以优化浏览器同一域名6个通道的限制")]),t._v(" "),e("p",[t._v("原理：将源站的内容发布到离用户较短中间环节的网络节点 ，用户可以就近获取所需数据 。")])])]),t._v(" "),e("h5",{attrs:{id:"c-减少资源体积"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#c-减少资源体积"}},[t._v("#")]),t._v(" c.减少资源体积")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("js/css 压缩，去重（js：terser-webpack-plugin，css：optimize-css-assets-webpack-plugin ）")])]),t._v(" "),e("li",[e("p",[t._v("js 使用 "),e("code",[t._v("Tree-shaking")]),t._v(" 删除无用代码")])]),t._v(" "),e("li",[e("p",[t._v("图片压缩，尽可能使用 "),e("code",[t._v("webp")]),t._v(" 格式，其次是 jpg")])]),t._v(" "),e("li",[e("p",[t._v("服务端 "),e("code",[t._v("gzip")]),t._v(" 压缩")])]),t._v(" "),e("li",[e("p",[t._v("拆包优化，通过"),e("code",[t._v("按需加载")]),t._v("减少体积")])])]),t._v(" "),e("hr"),t._v(" "),e("h3",{attrs:{id:"lcp（largest-contentful-paint）最大内容绘制"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#lcp（largest-contentful-paint）最大内容绘制"}},[t._v("#")]),t._v(" LCP（Largest Contentful Paint）最大内容绘制")]),t._v(" "),e("blockquote",[e("p",[t._v("更想知道的是页面主要的内容是何时呈现出来的，因为这个指标会持续更新")]),t._v(" "),e("p",[t._v("chrome-devtool => performance => timing => LCP")])]),t._v(" "),e("p",[t._v("记录视窗内最大的元素绘制的时间，该时间会随着页面渲染变化而变化，该指标会在用户第一次交互后停止记录。")]),t._v(" "),e("p",[t._v("官方推荐的时间区间 :")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("LCP 时间（秒）")]),t._v(" "),e("th",[t._v("颜色")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("0-2.5")]),t._v(" "),e("td",[t._v("Green("),e("code",[t._v("Good")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[t._v("2.5-4")]),t._v(" "),e("td",[t._v("Orange("),e("code",[t._v("needs improvement")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[t._v("4以上")]),t._v(" "),e("td",[t._v("Red("),e("code",[t._v("poor")]),t._v(")")])])])]),t._v(" "),e("h4",{attrs:{id:"优化：-2"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化：-2"}},[t._v("#")]),t._v(" 优化：")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("虚拟滚动列表（无限列表）")])]),t._v(" "),e("li",[e("p",[e("a",{attrs:{href:"https://juejin.im/post/59bf501ff265da06602971b9",target:"_blank",rel:"noopener noreferrer"}},[t._v("组件懒加载"),e("OutboundLink")],1)])]),t._v(" "),e("li",[e("p",[t._v("服务端渲染 / 预渲染")])])]),t._v(" "),e("hr"),t._v(" "),e("h3",{attrs:{id:"tti（time-to-interactive）首次可交互时间"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#tti（time-to-interactive）首次可交互时间"}},[t._v("#")]),t._v(" TTI（Time to Interactive）首次可交互时间")]),t._v(" "),e("blockquote",[e("p",[t._v("代表着页面何时真正进入可用的状态。光内容渲染的快也不够，还要能迅速响应用户的交互")])]),t._v(" "),e("p",[t._v("需要满足以下几个条件:")]),t._v(" "),e("ul",[e("li",[t._v("从 FCP 指标后开始计算")]),t._v(" "),e("li",[t._v("持续 5 秒内无长任务（执行时间超过 "),e("strong",[t._v("50 ms")]),t._v("）且无两个以上正在进行中的 GET 请求")]),t._v(" "),e("li",[t._v("往前回溯至 5 秒前的最后一个长任务结束的时间")])]),t._v(" "),e("p",[t._v("为什么是 "),e("strong",[t._v("50ms")]),t._v(" ?")]),t._v(" "),e("p",[t._v("对于用户交互（比如点击事件），推荐的响应时间是 100ms 以内。那么为了达成这个目标，推荐在空闲时间里执行任务不超过 50ms（"),e("a",{attrs:{href:"https://www.w3.org/TR/2017/WD-longtasks-1-20170907/",target:"_blank",rel:"noopener noreferrer"}},[t._v("W3C"),e("OutboundLink")],1),t._v(" 也有这样的标准规定），这样能在用户无感知的情况下响应用户的交互，否则就会造成延迟感。")]),t._v(" "),e("h4",{attrs:{id:"优化：-3"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化：-3"}},[t._v("#")]),t._v(" 优化：")]),t._v(" "),e("h5",{attrs:{id:"优化耗时任务"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化耗时任务"}},[t._v("#")]),t._v(" 优化耗时任务")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("将耗时任务等跟dom无关的事情交给 "),e("code",[t._v("Web Worker")]),t._v(" 执行")])]),t._v(" "),e("li",[e("p",[t._v("时间切片和 "),e("code",[t._v("requestIdleCallback")]),t._v(" 调度，尽量保证任务只在浏览器的空闲时间中执行而不卡顿主线程")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeSlicing")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("gen")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tgen "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("gen")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    \t"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("requestIdleCallback")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("deadline")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        \t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("while")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("deadline"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("timeRemaining")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          \t\tres "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" gen"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n                "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("res"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("done"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v("\n        \t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        \t"),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    \t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  \t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])])]),t._v(" "),e("hr"),t._v(" "),e("h3",{attrs:{id:"fid（first-input-delay）首次输入延迟"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#fid（first-input-delay）首次输入延迟"}},[t._v("#")]),t._v(" FID（First Input Delay）首次输入延迟")]),t._v(" "),e("blockquote",[e("p",[t._v("看用户交互事件触发到页面响应中间耗时多少，如果其中有长任务发生的话那么势必会造成响应时间变长")])]),t._v(" "),e("p",[t._v("记录在 FCP 和 TTI 之间用户首次与页面交互时响应的延迟。用户交互事件触发到页面响应中间耗时多少，如果其中有长任务发生的话那么势必会造成响应时间变长。")]),t._v(" "),e("p",[t._v("官方推荐的时间区间 :")]),t._v(" "),e("table",[e("thead",[e("tr",[e("th",[t._v("FID 时间")]),t._v(" "),e("th",[t._v("颜色")])])]),t._v(" "),e("tbody",[e("tr",[e("td",[t._v("100ms")]),t._v(" "),e("td",[t._v("Green("),e("code",[t._v("Good")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[t._v("100ms-300ms")]),t._v(" "),e("td",[t._v("Orange("),e("code",[t._v("needs improvement")]),t._v(")")])]),t._v(" "),e("tr",[e("td",[t._v("300ms以上")]),t._v(" "),e("td",[t._v("Red("),e("code",[t._v("poor")]),t._v(")")])])])]),t._v(" "),e("h4",{attrs:{id:"优化同上："}},[e("a",{staticClass:"header-anchor",attrs:{href:"#优化同上："}},[t._v("#")]),t._v(" 优化同上：")]),t._v(" "),e("hr"),t._v(" "),e("h2",{attrs:{id:"performance"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#performance"}},[t._v("#")]),t._v(" Performance")]),t._v(" "),e("blockquote",[e("p",[t._v("performance.timing")])]),t._v(" "),e("p",[e("img",{attrs:{src:s(349),alt:""}})]),t._v(" "),e("ul",[e("li",[e("code",[t._v("navigationStart")]),t._v("：代表浏览器开始unload前一个页面文档的开始时间节点。比如我们当前正在浏览baidu.com，在地址栏输入google.com并回车，浏览器的执行动作依次为：unload当前文档（即baidu.com）->请求下一文档（即google.com）。navigationStart的值便是触发unload当前文档的时间节点。配合这一个食用:"),e("RouterLink",{attrs:{to:"/浏览器原理/2.输入url到页面展示.html"}},[t._v("输入url到页面展示")])],1),t._v(" "),e("li",[e("code",[t._v("domainLookupStart")]),t._v(" 和 "),e("code",[t._v("domainLookupEnd")]),t._v(" 分别代表DNS查询的开始和结束时间节点。如果浏览器没有进行DNS查询（比如使用了cache），则两者的值都等于fetchStart。")]),t._v(" "),e("li",[e("code",[t._v("fetchStart")]),t._v(" 是指在浏览器发起任何请求之前的时间值。在fetchStart和domainLookupStart之间，浏览器会检查当前文档的缓存。")]),t._v(" "),e("li",[e("code",[t._v("connectStart")]),t._v(" 和 "),e("code",[t._v("connectEnd")]),t._v(" 分别代表TCP建立连接和连接成功的时间节点。如果浏览器没有进行TCP连接（比如使用持久化连接webscoket），则两者都等于domainLookupEnd。")]),t._v(" "),e("li",[e("code",[t._v("responseStart")]),t._v("和 "),e("code",[t._v("responseEnd")]),t._v(" 分别代表浏览器收到从服务器端（或缓存、本地资源）响应回的第一个字节和最后一个字节数据的时刻。")]),t._v(" "),e("li",[e("code",[t._v("domLoading")]),t._v(" 代表浏览器开始解析html文档的时间节点。")]),t._v(" "),e("li",[e("code",[t._v("domInteractive")]),t._v(" 代表浏览器解析html文档的状态为interactive时的时间节点。domInteractive并非DOMReady，它早于DOMReady触发，代表html文档解析完毕（即dom tree创建完成）但是内嵌资源（比如外链css、js等）还未加载的时间点。")])]),t._v(" "),e("h3",{attrs:{id:"性能指标计算"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#性能指标计算"}},[t._v("#")]),t._v(" 性能指标计算")]),t._v(" "),e("ul",[e("li",[t._v("DNS查询耗时 = domainLookupEnd - domainLookupStart")]),t._v(" "),e("li",[t._v("TCP链接耗时 = connectEnd - connectStart")]),t._v(" "),e("li",[t._v("白屏时间("),e("code",[t._v("FP")]),t._v(") = responseEnd - fetchStart")]),t._v(" "),e("li",[t._v("首次可交互时间("),e("code",[t._v("TTI")]),t._v(") = domInteractive - fetchStart")]),t._v(" "),e("li",[t._v("页面完全加载时间 = loadEventStart -fetchStart")])])])}),[],!1,null,null,null);a.default=n.exports}}]);